

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; IOI API Programmers Guide 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="IOI API Programmers Guide 1.0.0 documentation" href="index.html"/>
        <link rel="next" title="IOI API Publication" href="publication/index.html"/>
        <link rel="prev" title="IOI API Programmers Guide" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> IOI API Programmers Guide
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sign-up-programming-support">Sign Up - Programming Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-install-serverapi-exe">How to install serverapi.exe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-user-identities">Creating User Identities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-user-identities">Using User Identities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ioi-api-code-samples">IOI API Code Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publication/index.html">IOI API Publication</a></li>
<li class="toctree-l1"><a class="reference internal" href="subscription/index.html">IOI API Subscription</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">IOI API Programmers Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Introduction</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/introduction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>The IOI API Server provides Bloomberg users with the ability to publish IOIs into Bloomberg and
subscribe IOIs in Equities and Derivatives using Bloomberg API</p>
<p>The IOI API Server for subscribing requires separate authorization by the publishing broker on top of
the Bloomberg authorization.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>IOI API users will need the following steps completed before using the IOI API service.</p>
<blockquote class="last">
<div><ol class="arabic simple">
<li>Signed EMSxNET Order Originator Agreement.</li>
<li>Install serverapi.exe and register with Bloomberg.</li>
<li>Enable IOI API per UUID by the Global EMSX Trade Desk for Test (Beta) and Production.</li>
<li>To get access to IOI API in UAT and production, please click &lt;Help&gt;&lt;Help&gt; on EMSX&lt;GO&gt;.</li>
<li>Download Bloomberg Desktop API v3 SDK from WAPI&lt;GO&gt; in Bloomberg terminal.</li>
</ol>
</div></blockquote>
</div>
<p>To get access to IOI API in UAT and production, please click &lt;Help&gt;&lt;Help&gt; on EMSX&lt;GO&gt;.</p>
<div class="section" id="sign-up-programming-support">
<h2>Sign Up - Programming Support<a class="headerlink" href="#sign-up-programming-support" title="Permalink to this headline">¶</a></h2>
<p>For general programming support, please open an account through the following URL:-</p>
<p><a class="reference external" href="https://service.bloomberg.com">https://service.bloomberg.com</a></p>
<p>For a new user, you will need to first start by creating the account in <a class="reference external" href="https://service.bloomberg.com">https://service.bloomberg.com</a>  and select “Request a new account”.</p>
<a class="reference internal image-reference" href="_images/signIn.png"><img alt="_images/signIn.png" src="_images/signIn.png" style="width: 300pt;" /></a>
<p>Select Enterprise Solutions:-</p>
<a class="reference internal image-reference" href="_images/accountType.png"><img alt="_images/accountType.png" src="_images/accountType.png" style="width: 300pt;" /></a>
<p>Fill out the details on Account Registration:-</p>
<a class="reference internal image-reference" href="_images/accountReg.png"><img alt="_images/accountReg.png" src="_images/accountReg.png" style="width: 300pt;" /></a>
<p>Select B-Pipe, select the role as Technical Contact, and insert Customer #.  The Customer # can be found in the terminal by
typing IAM&lt;GO&gt;. Select production information as B-Pipe and click register to finish:-</p>
<a class="reference internal image-reference" href="_images/register.png"><img alt="_images/register.png" src="_images/register.png" style="width: 300pt;" /></a>
</div>
<div class="section" id="how-to-install-serverapi-exe">
<h2>How to install serverapi.exe<a class="headerlink" href="#how-to-install-serverapi-exe" title="Permalink to this headline">¶</a></h2>
<p>Please follow the following steps to install and register the installer with Bloomberg Enterprise Solutions with the assistance from EMSX Implementation team.</p>
<p>The following example is based on the windows environment and thus there will be slight variations when installing from linux or solaris operating system.</p>
<ul class="simple">
<li>Run serverapi.exe</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>C:\temp&gt;serverapiinstaller.exe
</pre></div>
</div>
<ul class="simple">
<li>You will see the following message</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>C:\temp&gt;serverapiinstaller.exe
logging to C:\temp\install.2016102610.152444.log

Bloomberg ECD Installer for Windows (32-bit)
Version 3.2.2.0


Warning: This program is protected by copyright law and international treaties.

Unauthorized reproduction or distribution of this program, or any portion of
it, may result in severe civil and criminal penalties, and will be prosecuted
to the maximum extent possible under law.


logging to C:\temp\install.2016102610.152444.log

Bloomberg ECD Installer for Windows (32-bit)
Version 3.2.2.0


Warning: This program is protected by copyright law and international treaties.

Unauthorized reproduction or distribution of this program, or any portion of
it, may result in severe civil and criminal penalties, and will be prosecuted
to the maximum extent possible under law.


Would you like to continue? (Y/N):
</pre></div>
</div>
<ul class="simple">
<li>Type:- Y</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Would you like to continue? (Y/N): y

Checking connectivity to Bloomberg ...


a) via Bloomberg Network to [ Hostname = 208.134.161.62 Port = 8194 ] ...
Succeeded.

                            [ Hostname = 208.134.161.158 Port = 8194 ] ...
Succeeded.

                            [ Hostname = 208.134.161.18 Port = 8194 ] ...
Succeeded.

                            [ Hostname = 208.134.161.179 Port = 8194 ] ...
Succeeded.

b) via the Internet to [ Hostname = api1.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api2.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api3.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api4.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api5.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api6.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api7.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api8.bloomberg.net Port = 8194 ] ...
Succeeded.



Which of the above routes will you use to connect to Bloomberg? (a/b):
</pre></div>
</div>
<ul class="simple">
<li>Select the appropriate network option (private vs. public/internet)</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Which of the above routes will you use to connect to Bloomberg? (a/b): b

Bloomberg Network connectivity unavailable. Connecting via the Internet.

Select Product Class
1) blpddm    Software that provides development access to distribute data locally or contribute data to Bloomberg.
2) ServerApi Provides access to Bloomberg real-time streaming and static data
0) Quit

Please enter selection:
</pre></div>
</div>
<ul class="simple">
<li>Select:- 2 for Server API</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Please enter selection: 2

Installation path:
        &#39;C:\&#39;

Use this path? (Y/N/Q):
</pre></div>
</div>
<ul class="simple">
<li>Select:- Y</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Use this path? (Y/N/Q): y

Downloading latest installer ...
done.

logging to C:\temp\install.2016102610.152444.log

Beginning new install ...
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the default port is already being used by a different service it may show the following message:</p>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>*** WARNING: Port conflict detected with other service.
The port of the Desktop will conflict with the ServerApi should installation proceed. If you still want to install
ServerApi, you will need to specify a different port number.

 Do you want to continue with the installation? (Y/N) [N]:
</pre></div>
</div>
<ul class="simple">
<li>Select:- Y and enter the port</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Do you want to continue with the installation? (Y/N) [N]:y
Please enter ServerApi listen port: [8294]:8294
</pre></div>
</div>
<ul class="simple">
<li>Select the version:-</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Versions available for ServerApi
1) 3.46.6.0     Windows     ServerAPI 2014-07

2) 3.48.8.1     Windows     ServerAPI 2014-09

3) 3.48.9.1     Windows     ServerAPI 2014-11

4) 3.50.7.1     Windows     ServerAPI 2015-01

5) 3.56.4.1     Windows     ServerAPI 2015-04

6) 3.60.0.1     Windows     ServerAPI 2015-07

7) 3.64.5.1     Windows     ServerAPI 2015-10

8) 3.70.0.1     Windows     ServerAPI 2016-01

9) 3.72.2.1     Windows     ServerAPI 2016-04

10) 3.82.3.1     Windows     ServerAPI 2016-10

11) 3.46.6.0     Windows64   ServerAPI 2014-07

12) 3.48.8.1     Windows64   ServerAPI 2014-09

13) 3.48.9.1     Windows64   ServerAPI 2014-11

14) 3.50.7.1     Windows64   ServerAPI 2015-01

15) 3.56.4.1     Windows64   ServerAPI 2015-04

16) 3.60.0.1     Windows64   ServerAPI 2015-07

17) 3.64.5.1     Windows64   ServerAPI 2015-10

18) 3.70.0.1     Windows64   ServerAPI 2016-01

19) 3.72.2.1     Windows64   ServerAPI 2016-04

20) 3.82.3.1     Windows64   ServerAPI 2016-10

0) Quit
Please enter version of ServerApi that you want to install:
</pre></div>
</div>
<ul class="simple">
<li>Select the latest:-</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Please enter version of ServerApi that you want to install: 20
Downloading ServerApi components ...
</pre></div>
</div>
<ul>
<li><p class="first">Enter other information:-</p>
<blockquote>
<div><p>Enter the following information:</p>
<p>Country (e.g., USA):
State (e.g., NY):
City or Town (e.g., New York):
Company Name (e.g., Bloomberg L.P.):
Department Name (e.g., Equity Trading):</p>
</div></blockquote>
</li>
<li><p class="first">Finished:-</p>
</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Enter the following information:

Country (e.g., USA): USA
State (e.g., NY): NY
City or Town (e.g., New York): New York
Company Name (e.g., Bloomberg L.P.): Bloomberg LP
Department Name (e.g., Equity Trading): EMSX

Creating certificate ...
done.

Registering server ...
done.


Do you want to install ServerApi as a Windows Service? (Y/N): y

Installing ServerApi as a windows Service...
service ServerApi configured for restart on first error
 done

done.


*** Please reboot your computer for changes to take effect ***


Call Bloomberg&#39;s Global Customer Support at +1 (212) 318-2000 and ask for the
Global Installs desk. The Bloomberg representative will ask you to read your
registration number over the phone four characters at a time.


Your registration key is:
        321c-5ad5-7fa8-2954-1930-abb0-b64c-ecaf-1505-64d4
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Once the registration process is completed. EMSX Implementation team globally will assist with configuring the Server Side EMSX API with various execution destinations per client request.</p>
</div>
</div>
<div class="section" id="creating-user-identities">
<h2>Creating User Identities<a class="headerlink" href="#creating-user-identities" title="Permalink to this headline">¶</a></h2>
<p>In the server environment, the user identities must be created and cached prior to the making requests.  Therefore, the process would look as follows:-</p>
<img alt="_images/userIdentity2.png" src="_images/userIdentity2.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note: The IOI API Server code samples demonstrate how to create identity object.</p>
</div>
<p>The first new step is to open the authentication service. This is done in the same way as for any other service in the Bloomberg API. For example:-</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>d_authsvc = &quot;//blp/apiauth&quot;;
session.openServiceAsync(d_authsvc);
</pre></div>
</div>
<p>Once the service is opened, we need to create and send an authorization request. To create an identity for a specific user, you will need the AuthID for the user. This is the name the user is known by in the EMRS system for your server. The values for these names will have been agreed with you as part of the implementation of the server, or subsequently when adding a new user. Also, an IP address is required. The only requirement for this IP address is that it is unique amongst all the identities generated for a session. You can create and send the request as follows:-</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>private Identity userIdentity;

*
*
*

Service authService = session.getService(d_authsvc);
Request authReq = authService.createAuthorizationRequest();

authReq.set(&quot;authId&quot;, authID);
authReq.set(&quot;ipAddress&quot;, appIP);

userIdentity = session.createIdentity();

authRequestID = new CorrelationID();

try
{
        session.sendAuthorizationRequest(authReq, userIdentity, authRequestID);
}
catch (Exception e)
{
        System.out.println(&quot;Unable to send authorization request: &quot; + e.getMessage());
}
</pre></div>
</div>
<p>In the above code, you can see that an empty identity object is created using <code class="docutils literal"><span class="pre">session.createIdentity()</span></code>. This is the object that will be populated once successful authentication has been achieved, and it is the object that will need to be cached.</p>
<p>We will receive a Response event for the Authentication service. In the example below, we use a <code class="docutils literal"><span class="pre">CorrelationID</span></code> to identify messages from the Authentication service, and check for success or failure:-</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>        if(msg.correlationID()==authRequestID) {

        if(msg.messageType().equals(AUTHORIZATION_SUCCESS)) {
                System.out.println(&quot;Authorised...Opening EMSX service...&quot;);
                System.out.println(&quot;Seat Type: &quot; + userIdentity.seatType().toString());
                session.openServiceAsync(d_service);
        } else if(msg.messageType().equals(AUTHORIZATION_FAILURE)) {
                System.out.println(&quot;Authorisation failed...&quot;);
                System.out.println(msg.toString());
                wait(1000);
                // Automatically retry...
                sendAuthRequest(session);
        } else {
                System.out.println(&quot;Unexpected authorisation message...&quot;);
                System.out.println(msg.toString());
        }
}
</pre></div>
</div>
<p>When we receive the successful authorization, we can continue with opening the usual EMSX service. If multiple authorization requests have been sent, for a number of different UUIDs, it is necessary to wait for all the responses before being able to use all the identity objects.</p>
<p>In the above code, you will see that we examine the ‘seatType’ of the identity. The seat type in this case will be either BPS or non-BPS.</p>
</div>
<div class="section" id="using-user-identities">
<h2>Using User Identities<a class="headerlink" href="#using-user-identities" title="Permalink to this headline">¶</a></h2>
<p>In the server environment, there is no Bloomberg terminal, and therefore no implied user can be identified.  Moreover, the server is capable of connecting to any number of EMSX user blotters, simultaneously. Therefore, the application making the call must indicate which user is the intended target. This is done through the creation and use of Identity object.</p>
<p>An Identity object represents a specific Bloomberg UUID.  Once created, an Identity object can be cached for 24hrs, and used with every <code class="docutils literal"><span class="pre">sendRequest()</span></code> and <code class="docutils literal"><span class="pre">subscribe()</span></code> call.</p>
<p>Identity objects are live, that is they remain connected to Bloomberg in real-time and are capable of receiving events. We recommend that an identity is recreated every 24hrs, to ensure that it picks up the latest changes to any user settings, including access to EMSX.</p>
<p>Any number of user Identity object can be created by a server-side application. If the application uses the identities of real traders within a firm, then each trader would have an identity created to represent them in the server application. The server application would, perhaps, receive an instruction from the upstream client-side application to create an order in a trader’s blotter. The server application would select the appropriate user identity from the cache and add it to the request.</p>
<p>Migrating the existing desktop application call to a server application simply involves changing all <code class="docutils literal"><span class="pre">sendRequest()</span></code> and <code class="docutils literal"><span class="pre">subscribe()</span></code> calls to include the appropriate identity, as follows:-</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DAPI:
        session.sendRequest(request, requestID);
        session.subscribe(subscriptions);

Server:
        session.sendRequest(request, Identity, requestID);
        session.subscribe(subscriptions, Identity);
</pre></div>
</div>
</div>
<div class="section" id="ioi-api-code-samples">
<h2>IOI API Code Samples<a class="headerlink" href="#ioi-api-code-samples" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The latest IOI API Code samples can be found <a class="reference external" href="https://github.com/tkim/ioi_api_repository_new">here</a>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="publication/index.html" class="btn btn-neutral float-right" title="IOI API Publication" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="IOI API Programmers Guide" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Terrence C. Kim.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>